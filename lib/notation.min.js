!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Notation",[],t):"object"==typeof exports?exports.Notation=t():e.Notation=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.toString,i={isObject:function(e){return"[object Object]"===r.call(e)},isArray:function(e){return"[object Array]"===r.call(e)},ensureArray:function(e){return i.isArray(e)?e:null===e||void 0===e?[]:[e]},hasOwn:function(e,t){return e&&"function"==typeof e.hasOwnProperty&&e.hasOwnProperty(t)},deepCopy:function(e){if(i.isArray(e)){var t=void 0,n=[],r=!0,a=!1,u=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)t=o.value,n.push(i.deepCopy(t))}catch(e){a=!0,u=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw u}}return n}if(i.isObject(e)){var s=void 0,c=void 0,f={};for(s in e)i.hasOwn(e,s)&&(c=e[s],f[s]=i.deepCopy(c));return f}return e},each:function(e,t,n){for(var r=e.length,i=-1;++i<r&&!1!==t.call(n,e[i],i,e););},eachRight:function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););},pregQuote:function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof e&&e===t||i.isArray(e)&&1===e.length&&e[0]===t},hasSingleItemOf:function(e,t){return 1===e.length&&(2!==arguments.length||e[0]===t)}};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,Object.defineProperty(n,"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(n,"message",{enumerable:!1,writable:!0,value:e}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,n.constructor):Object.defineProperty(n,"stack",{enumerable:!1,writable:!1,value:new Error(e).stack}),n}return a(t,e),t}(Error);t.default=u},function(e,t,n){"use strict";var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),o=r(u),l=n(4),s=r(l),c=n(1),f=r(c),v={SOURCE:"Invalid source object.",DEST:"Invalid destination object.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object: "},h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),!o.default.isObject(t)&&!o.default.isArray(t))throw new f.default(v.SOURCE);this._source=t}return a(e,[{key:"each",value:function(t){var n=this,r=this._source;if(o.default.isArray(r))o.default.each(r,function(i,a,u){var l=i,s=void 0;o.default.isObject(l)?(s=new e(l),s.each(function(e,n,a,u){var o=i+e;t.call(s,o,n,a,r)})):t.call(n,i,i,l,r)});else{var i=Object.keys(r);o.default.each(i,function(i,a,u){var l=r[i],s=void 0;o.default.isObject(l)?(s=new e(l),s.each(function(e,n,a,u){var o=i+"."+e;t.call(s,o,n,a,r)})):t.call(n,i,i,l,r)})}}},{key:"eachKey",value:function(e){return this.each(e)}},{key:"eachValue",value:function(t,n){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");var r=this._source;e.eachNote(t,function(e,t,i,a){if(r=o.default.hasOwn(r,t)?r[t]:void 0,!1===n(r,e,t,i,a))return!1})}},{key:"getNotations",value:function(){var e=[];return this.each(function(t,n,r,i){e.push(t)}),e}},{key:"flatten",value:function(){var e={};return this.each(function(t,n,r,i){e[t]=r}),this._source=e,this}},{key:"expand",value:function(){return this._source=e.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspect",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");var n=this._source,r={has:!1,value:void 0};return e.eachNote(t,function(e,t,i,a){if(!o.default.hasOwn(n,t))return r={has:!1,value:void 0},!1;n=n[t],r={has:!0,value:n}}),r}},{key:"inspectRemove",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");var n=void 0,r=void 0;if(t.match(/\.|\[/)<0)r=t,n=this._source;else{var i=e.parent(t);r=e.last(t),n=this.inspect(i).value}var a=void 0;return o.default.hasOwn(n,r)?(a={has:!0,value:n[r]},delete n[r]):a={has:!1,value:void 0},a}},{key:"has",value:function(e){return this.inspect(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspect(e).value}},{key:"get",value:function(e,t){var n=this.inspect(e);return n.has?n.value:t}},{key:"set",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");var i=this._source,a=void 0;return e.eachNote(t,function(e,t,u,l){a=u===l.length-1,o.default.hasOwn(i,t)?a?r&&(i[t]=n):i=i[t]:i=i[t]=a?n:{}}),this}},{key:"merge",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!o.default.isObject(e))throw new f.default(v.NOTA_OBJ+"`"+e+"`");var r=void 0;return o.default.each(Object.keys(e),function(i,a,u){r=e[i],t.set(i,r,n)}),this}},{key:"separate",value:function(t){var n=this;if(!o.default.isArray(t))throw new f.default(v.NOTA_OBJ+"`"+t+"`");var r=new e({});return o.default.each(t,function(e,t,i){var a=n.inspectRemove(e);r.set(e,a.value)}),this._source=r._source,this}},{key:"filter",value:function(t){var n=this,r=this.value,i=o.default.deepCopy(r),a=s.default.normalize(t).concat();if(o.default.stringOrArrayOf(a,"*"))return this._source=i,this;if(0===arguments.length||o.default.stringOrArrayOf(a,"")||o.default.stringOrArrayOf(a,"!*"))return this._source={},this;var u=void 0;"*"===a[0]?(u=new e(i),a.shift()):u=new e({});var l=void 0,c=void 0,f=void 0,v=void 0;return o.default.each(a,function(t,i,a){if(l=new s.default(t),c=".*"===l.absGlob.slice(-2),f="[*]"===l.absGlob.slice(-3),v=l.absGlob.replace(/(\.\*$)|(\[\*]$)/,""),v.indexOf("*")<0)return l.isNegated?(u.remove(v),c?u.set(v,{},!0):f&&u.set(v,[],!0)):u.copyFrom(r,v,null,!0),!0;n.each(function(t,n,r,i){e.eachNote(t,function(e,t,n,i){if(l.test(e)){if(l.isNegated)return u.remove(e),!1;u.set(e,r,!0)}})})}),this._source=u.value,this}},{key:"remove",value:function(e){return this.inspectRemove(e),this}},{key:"delete",value:function(e){return this.remove(e),this}},{key:"clone",value:function(){return new e(o.default.deepCopy(this.value))}},{key:"copyTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!o.default.isObject(t))throw new f.default(v.DEST);var a=this.inspect(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"copyFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!o.default.isObject(t))throw new f.default(v.DEST);var a=new e(t).inspect(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"moveTo",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!o.default.isObject(t))throw new f.default(v.DEST);var a=this.inspectRemove(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"moveFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!o.default.isObject(t))throw new f.default(v.DEST);var a=new e(t).inspectRemove(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"rename",value:function(e,t,n){return t?this.moveTo(this._source,e,t,n):this}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"value",get:function(){return this._source}}],[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"isValid",value:function(e){return"string"==typeof e&&/^[^\s.!]+((\.[^\s.!]+)|(\[([0-9]+|\*)\]))*$/.test(e)}},{key:"countNotes",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");return t.split(/\.|(?=\[)/).length}},{key:"countLevels",value:function(t){return e.countNotes(t)}},{key:"first",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");return t.split(/\.|(?=\[)/)[0]}},{key:"last",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");return t.split(/\.|(?=\[)/).reverse()[0]}},{key:"parent",value:function(t){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");return t.match(/\.|\[/)>=0?t.replace(/(\.|.\[)[^.[]*$/,""):null}},{key:"eachNote",value:function(t,n){if(!e.isValid(t))throw new f.default(v.NOTATION+"`"+t+"`");var r=t.split(/\.|(?=\[)/),i=[],a=void 0;o.default.each(r,function(e,t,u){if(i.push(e),a=e.match(/\[([0-9]+|\*)]/)?i.join(""):i.join("."),!1===n(a,e,t,r))return!1},e)}},{key:"eachLevel",value:function(t,n){e.eachNote(t,n)}}]),e}();h.Error=f.default,h.Glob=s.default,t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),o=r(u),l=n(1),s=r(l),c=function(){function e(t){if(i(this,e),!e.isValid(t))throw new s.default('Invalid notation glob: "'+t+'"');var n=e.inspect(t);this._={glob:t,absGlob:n.absGlob,isNegated:n.isNegated,regexp:e.toRegExp(n.absGlob),levels:n.absGlob.split(/\.|(?=\[)/)}}return a(e,[{key:"test",value:function(e){return"*"===this.absGlob||""!==this.absGlob&&""!==e&&this.regexp.test(e)}},{key:"glob",get:function(){return this._.glob}},{key:"absGlob",get:function(){return this._.absGlob}},{key:"isNegated",get:function(){return this._.isNegated}},{key:"regexp",get:function(){return this._.regexp}},{key:"notes",get:function(){return this._.levels}},{key:"levels",get:function(){return this._.levels}}],[{key:"create",value:function(t){return new e(t)}},{key:"toRegExp",value:function(e){return 0===e.indexOf("!")&&(e=e.slice(1)),e=o.default.pregQuote(e).replace(/\\\*/g,"[^\\s\\.\\[\\]]*").replace(/\\\?/g,"."),new RegExp("^"+e+"((\\.|\\[).+|$)")}},{key:"inspect",value:function(e){var t="!"===e.slice(0,1);return e=t?e.slice(1):e,{absGlob:e,isNegated:t}}},{key:"isValid",value:function(e){return"string"==typeof e&&/^(!?([^\s.!*\[\]]+|\*)((\.([^\s.!*\[\]]+|\*))|(\[([0-9]+|\*)\]))*)$/.test(e)}},{key:"compare",value:function(e,t){if(e===t)return 0;var n=e.split(/\.|(?=\[)/),r=t.split(/\.|(?=\[)/);if(n.length===r.length){var i=/(?:^|\.)\*(?:$|\.)|\[\*\]/g,a=e.match(i),u=t.match(i),o=a?a.length:0,l=u?u.length:0;if(o===l){var s=0===e.indexOf("!"),c=0===t.indexOf("!");if(s===c)return e<t?-1:1;var f=s?e.slice(1):e,v=c?t.slice(1):t;return f===v?s?1:-1:f<v?-1:1}return o>l?-1:1}return n.length<r.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"normalize",value:function(t){t=o.default.ensureArray(t).map(function(e){return e.trim()}),t=e.sort(t),o.default.eachRight(t,function(n,r){var i=e.inspect(n),a=!1,u=!1,l=!1,s=!0,c=!1,f=!0;o.default.eachRight(t,function(t,o){if(o!==r){var v=e.inspect(t),h=e.toRegExp(v.absGlob);if(n===t)return a=!0,!1;if(v.isNegated&&n===v.absGlob)return u=!0,!1;if(i.isNegated){if(v.isNegated&&h.test(i.absGlob))return l=!0,!1;s&&h.test(i.absGlob)&&(s=!1)}else!v.isNegated&&h.test(i.absGlob)?c=!0:f&&h.test(i.absGlob)&&(f=!1)}});var v=i.isNegated?l||s:c&&f;(a||u||v)&&t.splice(r,1)});var n=t.indexOf("!*");return n>=0&&t.splice(n,1),t}},{key:"union",value:function(t,n){if(o.default.hasSingleItemOf(t,"*")||o.default.hasSingleItemOf(n,"*"))return["*"];var r=t.concat(),i=n.concat(),a=void 0,u=void 0,l=void 0,s=void 0,c=[];o.default.eachRight(r,function(t,n){l=e.inspect(t),a=e.toRegExp(l.absGlob),o.default.eachRight(i,function(o,f){if(s=e.inspect(o),u=e.toRegExp(s.absGlob),l.isNegated&&!s.isNegated){if(l.absGlob===s.absGlob)return r.splice(n,1),!1;if(u.test(l.absGlob)&&-1===i.indexOf(t)&&-1===c.indexOf(t))return r.splice(n,1),!1}if(!l.isNegated&&s.isNegated){if(l.absGlob===s.absGlob)return void i.splice(f,1);if(a.test(s.absGlob)&&-1===r.indexOf(o)&&-1===c.indexOf(o))return void i.splice(f,1)}if(l.isNegated&&s.isNegated&&t!==o){if(u.test(l.absGlob))return i.splice(f,1),void c.push(t);if(a.test(s.absGlob))return r.splice(n,1),c.push(o),!1}if(!l.isNegated&&!s.isNegated&&t===o)return r.splice(n,1),!1})});var f=r.concat(i);return e.normalize(f)}}]),e}();t.default=c}])});
//# sourceMappingURL=notation.min.js.map