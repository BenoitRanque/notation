!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("notation",[],t):"object"==typeof exports?exports.notation=t():e.notation=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),a=r(i);e.exports=a["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),o=r(u),s=n(3),l=r(s),c=n(4),f=r(c),h={SOURCE:"Invalid source object.",DEST:"Invalid destination object.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object: "},v=function(){function e(t){if(i(this,e),t=void 0===t?{}:t,!o["default"].isObject(t))throw new f["default"](h.SOURCE);this.source_=t}return a(e,[{key:"eachKey",value:function(t){var n=this.source_,r=Object.keys(n);o["default"].each(r,function(r,i,a){var u,s=n[r];o["default"].isObject(s)?(u=new e(s),u.eachKey(function(e,i,a,u){var o=r+"."+e;t.call(this,o,i,a,n)})):t.call(this,r,r,s,n)},this)}},{key:"eachNoteValue",value:function(t,n){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");var r=this.source_;e.eachNote(t,function(e,t,i,a){return r=o["default"].hasOwn(r,t)?r[t]:void 0,n(r,e,t,i,a)===!1?!1:void 0})}},{key:"getNotations",value:function(){var e=[];return this.eachKey(function(t,n,r,i){e.push(t)}),e}},{key:"getFlat",value:function(){var e={};return this.eachKey(function(t,n,r,i){e[t]=r}),e}},{key:"getMap",value:function(){return this.getFlat()}},{key:"inspect",value:function(t){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");var n=this.source_,r={has:!1,value:void 0};return e.eachNote(t,function(e,t,i,a){return o["default"].hasOwn(n,t)?(n=n[t],void(r={has:!0,value:n})):(r={has:!1,value:void 0},!1)}),r}},{key:"inspectRemove",value:function(t){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");var n,r;if(t.indexOf(".")<0)r=t,n=this.source_;else{var i=e.parent(t);r=e.last(t),n=this.inspect(i).value}var a;return o["default"].hasOwn(n,r)?(a={has:!0,value:n[r]},delete n[r]):a={has:!1,value:void 0},a}},{key:"has",value:function(e){return this.inspect(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspect(e).value}},{key:"get",value:function(e,t){var n=this.inspect(e);return n.has?n.value:t}},{key:"set",value:function(t,n,r){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");r="boolean"==typeof r?r:!0;var i,a=this.source_;return e.eachNote(t,function(e,t,u,s){i=u===s.length-1,o["default"].hasOwn(a,t)?i?r&&(a[t]=n):a=a[t]:a=a[t]=i?n:{}}),this}},{key:"merge",value:function(e,t){if(!o["default"].isObject(e))throw new f["default"](h.NOTA_OBJ+"`"+e+"`");var n;return o["default"].each(Object.keys(e),function(r,i,a){n=e[r],this.set(r,n,t)},this),this}},{key:"separate",value:function(t){if(!o["default"].isArray(t))throw new f["default"](h.NOTA_OBJ+"`"+t+"`");var n=new e({});return o["default"].each(t,function(e,t,r){var i=this.inspectRemove(e);n.set(e,i.value)},this),n.source_}},{key:"filter",value:function(t){var n=this.value,r=o["default"].deepCopy(n);if(o["default"].stringOrArrayOf(t,"*"))return this.source_=r,this;if(0===arguments.length||o["default"].stringOrArrayOf(t,""))return this.source_={},this;var i,a=o["default"].isArray(t)?l["default"].sort(t.concat()):[t];"*"===a[0]?(i=new e(r),a.shift()):i=new e({});var u,s,c;return o["default"].each(a,function(e,t,r){return u=new l["default"](e),s=".*"===u.normalized.slice(-2),c=s?u.normalized.slice(0,-2):u.normalized,c.indexOf("*")<0?(u.isNegated?(i.remove(c),s&&i.set(c,{},!0)):i.copyFrom(n,c,null,!0),!0):void this.eachKey(function(e,t,n,r){u.test(e)&&(u.isNegated?i.remove(e):i.set(e,n,!0))})},this),this.source_=i.value,this}},{key:"remove",value:function(e){return this.inspectRemove(e),this}},{key:"clone",value:function(){var t=o["default"].deepCopy(this.value);return new e(t)}},{key:"copyTo",value:function(t,n,r,i){if(!o["default"].isObject(t))throw new f["default"](h.DEST);var a=this.inspect(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"copyFrom",value:function(t,n,r,i){if(!o["default"].isObject(t))throw new f["default"](h.DEST);var a=new e(t).inspect(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"moveTo",value:function(t,n,r,i){if(!o["default"].isObject(t))throw new f["default"](h.DEST);var a=this.inspectRemove(n);return a.has&&new e(t).set(r||n,a.value,i),this}},{key:"moveFrom",value:function(t,n,r,i){if(!o["default"].isObject(t))throw new f["default"](h.DEST);var a=new e(t).inspectRemove(n);return a.has&&this.set(r||n,a.value,i),this}},{key:"rename",value:function(e,t,n){return t?this.moveTo(this.source_,e,t,n):this}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"value",get:function(){return this.source_}}],[{key:"create",value:function(t){return new e(t)}},{key:"isValid",value:function(e){return"string"==typeof e&&/^[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"first",value:function(t){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");return t.split(".")[0]}},{key:"last",value:function(t){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");return t.split(".").reverse()[0]}},{key:"parent",value:function(t){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");return t.indexOf(".")>=0?t.replace(/\.[^\.]*$/,""):null}},{key:"eachNote",value:function(t,n){if(!e.isValid(t))throw new f["default"](h.NOTATION+"`"+t+"`");var r,i=t.split("."),a=[];o["default"].each(i,function(e,t,u){return a.push(e),r=a.join("."),n(r,e,t,i)===!1?!1:void 0},e)}}]),e}();v.Error=f["default"],v.Glob=l["default"],t["default"]=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.toString,r={isObject:function(e){return"[object Object]"===n.call(e)},isArray:function(e){return"[object Array]"===n.call(e)},hasOwn:function(e,t){return e&&"function"==typeof e.hasOwnProperty&&e.hasOwnProperty(t)},deepCopy:function(e){if(!r.isObject(e))return e;var t,n,i={};for(t in e)r.hasOwn(e,t)&&(n=e[t],i[t]=r.isObject(n)?r.deepCopy(n):n);return i},each:function(e,t,n){for(var r=e.length,i=-1;++i<r&&t.call(n,e[i],i,e)!==!1;);},eachRight:function(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);},pregQuote:function(e,t){return String(e).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(t||"")+"-]","g"),"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof e&&e===t||r.isArray(e)&&1===e.length&&e[0]===t}};t["default"]=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),o=r(u),s=n(4),l=r(s),c=function(){function e(t){if(i(this,e),!e.isValid(t))throw new l["default"]('Invalid notation glob: "'+t+'"');this.glob=t;var n=e.normalize(t);this.normalized=n.glob,this.isNegated=n.isNegated,this.regexp=e.toRegExp(this.normalized),this.levels=this.normalized.split(".")}return a(e,[{key:"test",value:function(e){return"*"===this.normalized||""!==this.normalized&&""!==e&&this.regexp.test(e)}}],[{key:"create",value:function(t){return new e(t)}},{key:"toRegExp",value:function(e,t){return e=o["default"].pregQuote(e).replace(/\\\*/g,"[^\\s\\.]*").replace(/\\\?/g,"."),new RegExp("^"+e,t||"")}},{key:"normalize",value:function(t){t=t.replace(/\*+/g,"*"),t=e.isValid(t)?t:"";var n="!"===t.slice(0,1);return t=n?t.slice(1):t,{glob:t,isNegated:n}}},{key:"isValid",value:function(e){return"string"==typeof e&&/^!?[^\s\.!]+(\.[^\s\.!]+)*$/.test(e)}},{key:"compare",value:function(e,t){if(e===t)return 0;var n=e.split("."),r=t.split(".");if(n.length===r.length){var i=/(?:^|\.)\*(?:$|\.)/g,a=e.match(i),u=t.match(i),o=a?a.length:0,s=u?u.length:0;if(o===s){var l=0===e.indexOf("!"),c=0===t.indexOf("!");if(l===c)return t>e?-1:1;var f=l?e.slice(1):e,h=c?t.slice(1):t;return f===h?l?1:-1:h>f?-1:1}return o>s?-1:1}return n.length<r.length?-1:1}},{key:"sort",value:function(t){return t.sort(e.compare)}},{key:"union",value:function(t,n,r){var i,a,u;o["default"].eachRight(t,function(r,s){if(u=n.indexOf(r),u>=0&&n.splice(u,1),0===r.indexOf("!")){if(i=r.slice(1),n.indexOf(i)>=0)return t.splice(s,1),!0;o["default"].eachRight(n,function(n,r){n.indexOf("!")<0&&(a=e.toRegExp(n),a.test(i)&&t.splice(s,1))})}else u=n.indexOf("!"+r),u>=0&&n.splice(u,1)});var s=t.concat(n);return void 0===r||r===!0?e.sort(s):s}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e));return i.name=i.constructor.name,Object.defineProperty(i,"name",{enumerable:!1,writable:!0,value:"NotationError"}),Object.defineProperty(i,"message",{enumerable:!1,writable:!0,value:e}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i,i.constructor):Object.defineProperty(i,"stack",{enumerable:!1,writable:!0,value:new Error(e).stack}),i}return i(t,e),t}(Error);t["default"]=a}])});
//# sourceMappingURL=notation.min.js.map